# 11回目作業項目

- [Phaserの最新のマニュアルはこちら](https://photonstorm.github.io/phaser-ce/)
- [Phaserのサンプル集](http://phaser.io/examples/)

# クリックした場所を目指すようにする
現在は、マウスカーソルがある場所にすぐにプレイヤーを動かしてしまっているが、この方法ではワープが出来るし、スマホに対応できない。そこで、クリックした座標を、速度の上限を決めた上で移動するようにする。

どうやって調べたらよいだろう？Phaserの場合、まずはやりたいことに近いサンプルがないか、公式ページで探してみよう。今回は、やりたいことそのままのサンプルがあるので見つけてみよう。

見つかったら、そのプログラムの解説を書いてみよう。以下の指示に従って、Gistにソースコードを貼り付けて、コマンドを調べて、解説を作成する。

- https://github.com を開いて、ログインする
- GitHubページの上の欄から[Gist]をクリック
  - Gistとは、ソースコードを単体で登録、公開するためのGitHubの機能である。ブログなどに埋め込むこともできる
- 見つけたサンプルコードの`update`関数をコピーして、Gistに貼り付ける
- Gistのファイル名を`update.js`にする
- 貼り付けたら、プログラムの全ての行が何をやっているのか、コメントを書き込んでいく
  - Google Chromeの翻訳や、Weblioを活用する
  - 英語は、その行が何をやっているのかの概要。和訳してもよいが、これでは不足である
  - Phaserのマニュアルで命令を調べる
  - 「何を」「どのようなパラメーターで」「どうしようとしているのか」というように、具体的な内容を追記すること
  - 英語のコメントがない行があるが、そこにも追記すること
- 以上できたら、右下の[Create public gist]を押して公開する

以上で、何をやっているのかが把握できるだろう。それをもとに、手元のコードにプログラムを追加し、必要な変更を加えて、プレイヤーがマウスをクリックした場所を追うようにしてみよう。

# 星の数を管理
星を全て取ったかを判定できるようにする。C#ではstaticを使った。ここでも、グループ全体を代表する場所で管理する、という考え方は同じ。Phaserでの実装では、`stars`というグループがあるので、これに星の数を持たせればよい。

JavaScriptのオブジェクトには、クラスは必ずしも必要ではない。オブジェクトに実行中にプロパティーを追加するという荒業ができる。

- `create.js`を開いて、`stars`に`starCount`というプロパティーを追加して、0を代入
- 星を作成するループ内で、`stars.starCount`を1ずつ増やす
- `update.js`を開いて、星を取ったところで`stars.starCount`を1減らす
- `stars.starCount`が0になったら、とりあえず`console.log("clear");`として、表示

以上で、一先ず星の収集ができた。

# 敵を出す
星を出した手順を振り返って、敵を作ってみよう。

- 敵のスプライトを選ぶ
- `preload.js`で選んだスプライトを読み込む
- `create.js`で敵をゲームに登録
  - 敵グループを作成
  - 敵グループの物理エンジンを有効にする
  - `for`文を使って、敵を4匹ほど、ランダムで出現させる
- `update.js`で敵との判定
  - 敵とぶつかったら、コールバック関数を呼ぶようにする
  - コールバック関数を作成して、`miss`とコンソールに表示させる
